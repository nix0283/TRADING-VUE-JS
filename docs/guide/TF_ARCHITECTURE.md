# üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Timeframe Selector + –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### üìä –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    TradingVue Component                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ TFSelector  ‚îÇ‚îÄ‚îÄ‚îÄ>‚îÇ   Event     ‚îÇ‚îÄ‚îÄ‚îÄ>‚îÇ  Your App   ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  (UI)       ‚îÇ    ‚îÇ timeframe-  ‚îÇ    ‚îÇ  Handler    ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ    ‚îÇ  change     ‚îÇ    ‚îÇ             ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                                                ‚îÇ              ‚îÇ
‚îÇ                                                ‚ñº              ‚îÇ
‚îÇ                                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ                                         ‚îÇ  DataCube   ‚îÇ      ‚îÇ
‚îÇ                                         ‚îÇ  (update)   ‚îÇ      ‚îÇ
‚îÇ                                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                                                ‚îÇ              ‚îÇ
‚îÇ                                                ‚ñº              ‚îÇ
‚îÇ                                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ                                         ‚îÇ   Chart     ‚îÇ      ‚îÇ
‚îÇ                                         ‚îÇ  (render)   ‚îÇ      ‚îÇ
‚îÇ                                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚ùì –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã

### 1. –°–∫–æ–ª—å–∫–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å?

**–û—Ç–≤–µ—Ç: –ù–µ—Ç –∂—ë—Å—Ç–∫–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

| –§–∞–∫—Ç–æ—Ä | –í–ª–∏—è–Ω–∏–µ |
|--------|---------|
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—Ä–∞—É–∑–µ—Ä–∞** | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤** | MACD —Ç—è–∂–µ–ª–µ–µ —á–µ–º EMA |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö** | 10,000 —Å–≤–µ—á–µ–π –º–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º 100 |
| **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** | –ú–æ–±–∏–ª—å–Ω—ã–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –¥–µ—Å–∫—Ç–æ–ø–∞ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- ‚úÖ **1-5 –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤** ‚Äî –æ—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚ö†Ô∏è **5-10 –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤** ‚Äî —Ö–æ—Ä–æ—à–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
- ‚ö†Ô∏è **10-20 –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤** ‚Äî –∑–∞–º–µ—Ç–Ω–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚ùå **20+ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤** ‚Äî –º–æ–∂–µ—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å

---

### 2. –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ TF –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è?

**–û—Ç–≤–µ—Ç: –î–ê, –Ω–æ —ç—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏!**

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç (—á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã)

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤** TradingVue.js:

```javascript
// –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–∞–∫ —Å–∫—Ä–∏–ø—Ç - –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò
{
    name: 'EMA(20)',
    type: 'EMA',
    data: [],  // –ü—É—Å—Ç–æ! –î–∞–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∫—Ä–∏–ø—Ç
    settings: { length: 20 },
    script: {
        update: `
            return ema(close, 20)[0]
        `
    }
}
```

‚úÖ **–ü–ª—é—Å—ã:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–∞–Ω–Ω—ã—Ö
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ Web Worker (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI)

---

#### –í–∞—Ä–∏–∞–Ω—Ç B: –†—É—á–Ω–æ–π –ø–µ—Ä–µ—Å—á—ë—Ç (–ø—Ä–µ–¥—Ä–∞—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

–ï—Å–ª–∏ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ **–≥–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞:

```javascript
// –ü—Ä–µ–¥—Ä–∞—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ - –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –í–†–£–ß–ù–£–Æ
{
    name: 'EMA(20)',
    type: 'EMA',
    data: [[timestamp, value], ...],  // –ì–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ!
    settings: { color: '#2962ff' }
}
```

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–π –ø–µ—Ä–µ—Å—á—ë—Ç:**

```javascript
methods: {
    onTFChange(tf) {
        // 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ OHLCV –¥–∞–Ω–Ω—ã–µ
        const newData = loadDataForTimeframe(tf)
        this.chart.set('chart.data', newData)

        // 2. –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –í–°–ï –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤—Ä—É—á–Ω—É—é!
        this.recalculateIndicators()

        // 3. –û–±–Ω–æ–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫
        this.$refs.tradingVue.resetChart()
    },

    recalculateIndicators() {
        const data = this.chart.data.chart.data

        // –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –∫–∞–∂–¥—ã–π onchart –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
        for (let ind of this.chart.data.onchart) {
            if (ind.type === 'EMA') {
                ind.data = calcEMA(data, 20)
            } else if (ind.type === 'SMA') {
                ind.data = calcSMA(data, 50)
            }
        }

        // –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –∫–∞–∂–¥—ã–π offchart –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
        for (let ind of this.chart.data.offchart) {
            if (ind.type === 'RSI') {
                ind.data = calcRSI(data, 14)
            }
        }
    }
}
```

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö DataCube

```javascript
const chartData = {
    // –û—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫ (—Å–≤–µ—á–∏)
    chart: {
        type: 'Candles',
        name: 'BTC/USDT',
        data: [[ts, o, h, l, c, v], ...]  // OHLCV
    },

    // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ù–ê –≥—Ä–∞—Ñ–∏–∫–µ (EMA, SMA, BB...)
    onchart: [
        {
            name: 'EMA(20)',
            type: 'EMA',
            data: [[ts, value], ...],
            settings: { color: '#2962ff' }
        }
    ],

    // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ü–û–î –≥—Ä–∞—Ñ–∏–∫–æ–º (RSI, MACD, Volume...)
    offchart: [
        {
            name: 'RSI(14)',
            type: 'RSI',
            data: [[ts, value], ...],
            settings: { color: '#00c853' }
        }
    ]
}
```

---

## üìù –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä

–°–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª: `test/tests/TimeframesDemo.vue`

### –ó–∞–ø—É—Å–∫ –¥–µ–º–æ:

```bash
cd trading-vue-js
npm install
npm run test
# –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç "TimeframesDemo"
```

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°–æ–≤–µ—Ç—ã:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã** –≤–º–µ—Å—Ç–æ –ø—Ä–µ–¥—Ä–∞—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–ª–∏–Ω—É –¥–∞–Ω–Ω—ã—Ö** ‚Äî –Ω–µ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ 10 –ª–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WebWorker** –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
4. **–ö—ç—à–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ** –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤

### –ü—Ä–∏–º–µ—Ä —Å WebWorker:

```javascript
// datacube settings
const dc = new DataCube(data, {
    ww_ram_limit: 100,  // 100MB limit for WebWorker
    script_depth: 5000  // Calculate only last 5000 candles
})
```

---

## üéÆ API Reference

### TFSelector Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `timeframes` | Boolean | `false` | –í–∫–ª—é—á–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä |
| `timeframe` | String | `'1D'` | –¢–µ–∫—É—â–∏–π TF (v-model) |
| `timeframe-style` | String | `'dropdown'` | `'dropdown'` –∏–ª–∏ `'full'` |
| `timeframe-extended` | Boolean | `false` | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä TF |

### Events

| Event | Payload | Description |
|-------|---------|-------------|
| `timeframe-change` | `tf: string` | –ü—Ä–∏ —Å–º–µ–Ω–µ TF |

### DataCube Methods

| Method | Description |
|--------|-------------|
| `set(query, data)` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ |
| `add('onchart', ind)` | –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä |
| `del(query)` | –£–¥–∞–ª–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä |
| `get(query)` | –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ |
